#!/usr/bin/env php
<?php

declare(strict_types=1);

use Contributte\Console\Application;

$root = getcwd();

// Composer autoload
$autoload = $root . '/vendor/autoload.php';
if (!is_file($autoload)) {
	fwrite(STDERR, "Composer autoload not found. Run composer install.\n");
	exit(1);
}
require $autoload;

// Project bootstrap
$bootstrapFile = $root . '/app/Bootstrap.php';
if (!is_file($bootstrapFile)) {
	fwrite(STDERR, "Project Bootstrap not found at app/Bootstrap.php.\n");
	exit(1);
}
require $bootstrapFile;

// Bootstrapping console application
$bootstrap = new \App\Bootstrap();
$container = $bootstrap->bootConsoleApplication();

/** @var Application $app */
$app = $container->getByType(Application::class);

exit($app->run());
